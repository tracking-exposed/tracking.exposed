---
title: "Makhno — URL analysis report"
subtitle: "Resistance Against Automated Content Takedown"
draft: false
date: "2022-06-01"
type: "fullscreen"

extraCSS: "/css/makhno.css"

og_title: "Makhno — mapping social media algorithmic censorship"
og_description: "A Mozilla Technology Fund sponsored project to enhance resistance against automated content takedown"
og_type: "website"
og_image: "https://tracking.exposed/images/makhno/logo_withBG+safe_areas.png"
og_url: "https://tracking.exposed/makhno"
---


<div class="makhno">

  <div class="central-elements">
    <a href="/makhno">
      <img id="logo" src="/images/makhno/logo-lightmode.png" />
    </a>

    <h3>
      <span id="loading--message">Loading result from: </span>
      <span id="urlId"></span>
    </h3>
    <hr>
    <!-- mutually exclsive, one or the other is filled -->
    <div id="error--info"></div>
    <div id="results"></div>
  </div>

</div>

<script>

  function buildApiUrl(apiName, option, apiv) {
    // const SERVER = 'https://tracking.exposed';
    const SERVER = 'http://localhost:15000';
    let rv = null;
    const api_path = apiv ? `/api/v${apiv}/` : "/api/v1/";

    if (window.location.origin.match(/localhost/)) {
        const x = SERVER;
        rv = option ? `${x}${api_path}${apiName}/${option}` : `${x}${api_path}${apiName}`;
        console.log(`Builing URL by hardcoded domains (development) URL composed ${rv}`);
    } else {
        rv = option ? `${api_path}${apiName}/${option}` : `${api_path}/${apiName}`;
        console.log(`Building URL by window...href (production) URL composed ${rv}`);
    }
    return rv;
  }

  window.onload = async () => {
    $("footer").fadeOut(600);

    let urlId = window.location.hash;
    if(urlId.length !== 41) {
      $("#title").text("Error: expected an urlId in the URL");
      return;
    }
    urlId = urlId.substr(1);
    $("#urlId").text(urlId);
    $("#urlId").addClass("glow");

    const mat = await loadResults(urlId);
    $("#urlId").removeClass("glow");

    if(mat.success) {
      $("#loading--message").text("Loaded results of: ");
      displayResults(mat.results);
    }
    else {
      $("#loading--message").text("Error in loading: ");
      $("#error--info").html('<code>' + mat.error + '</code>');
    }
  }

  async function loadResults(urlId) {
    try {
      const connection = await fetch(buildApiUrl('results', urlId));
      const content = await connection.json();
      console.log(content);
      return content;
    } catch(error) {
      return {
        success: false,
        error
      }
    }
  }

  function displayResults(results) {
    const all = _.map(results || [], function(rentr) {
      return '<pre>' + JSON.stringify(rentr) + '</pre>';
    });
    $("#results").html(all.join('\n'));
  }

</script>
